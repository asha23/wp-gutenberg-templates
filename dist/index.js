!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=(n.n(i),n(3)),a=(n.n(o),n(4)),r=n.n(a),s=n(5),c=(n.n(s),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.previousTemplate=null,this.template=null,this.initialLoad=!0,Object(i.subscribe)(function(){t.initialLoad=!1,t.subscribe()}),this.subscribe()}return c(e,[{key:"subscribe",value:function(){var e=Object(i.select)("core/editor").getEditedPostAttribute("template");e!==this.template&&(this.previousTemplate=this.template,this.template=e,e?this.changeTemplate():null!==this.previousTemplate&&Object(i.dispatch)("core/editor").updateEditorSettings({templateLock:!1}))}},{key:"changeTemplate",value:function(){var e=this,t=Object(i.dispatch)("core/editor"),n=t.resetBlocks,a=t.editPost,c=t.updateEditorSettings,l=Object(i.dispatch)("core/notices"),u=l.createWarningNotice,p=l.removeNotice;r()({path:"/gutenberg-templates/v1/template",data:{template:this.template}}).then(function(t){var r=Object(i.select)("core/editor").getBlocks(),l=t.template,f=t.template_lock,m=function(){n(Object(s.synchronizeBlocksWithTemplate)(r,l)),c({templateLock:f})};!r.length||Object(s.doBlocksMatchTemplate)(r,l)?m():e.wasDefaultTemplate()&&u(Object(o.__)("The content of your post doesn't match the assigned template.","wp-gutenberg-templates"),{actions:[{label:Object(o.__)("Keep it as is","wp-gutenberg-templates"),onClick:function(){"all"===f&&a({template:e.previousTemplate}),p("SYNCHRONIZE_TEMPLATE_NOTICE_ID")},className:"is-link"},{label:Object(o.__)("Reset the template","wp-gutenberg-templates"),onClick:function(){window.confirm(Object(o.__)("Resetting the template may result in loss of content, do you want to continue?","wp-gutenberg-templates"))&&m(),p("SYNCHRONIZE_TEMPLATE_NOTICE_ID")},className:"is-link"}],isDismissible:!1,id:"SYNCHRONIZE_TEMPLATE_NOTICE_ID"})})}},{key:"wasDefaultTemplate",value:function(){return""===this.previousTemplate&&!this.initialLoad}}]),e}())},function(e,t){e.exports=wp.data},function(e,t){e.exports=wp.i18n},function(e,t){e.exports=wp.apiRequest},function(e,t){e.exports=wp.blocks}]);